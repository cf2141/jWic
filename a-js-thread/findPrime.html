<!DOCTYPE html>
<html>
	<head>
		<title>Find a Prime</title>
	</head>
	<body>
		<script id="worker" type="text/js-worker">
			self.onmessage = function(event) {
				findPrime();
			}
 
			function findPrime()
			{
				var n = 1;
				var prime;
				while (true) {
					n++;
					prime = true;
					for (var i = 2; i <= Math.sqrt(n); i++)
						if (n % i == 0) {
							prime = false;
							break;
						}
					if (prime)  postMessage(n);		 
				}
			}			
		</script>
		<form>
			<label for="prime">The largest prime number: </label><input type="text" id="prime" disabled/> 
			<input type="button" value="Start" onclick="startFind()"/>
			<input type="button" value="End" onclick="stopFind()"/>
		</form>
		<script type="text/javascript">
		var worker;
	
		function startFind() {
			var script = document.getElementById('worker').textContent;
			var blob = new Blob([script]);
			
			worker = new Worker(window.URL.createObjectURL(blob));
			worker.onmessage = function(event) {
				document.getElementById('prime').value = event.data;
			}
			worker.postMessage('Start');
		}
	
		function stopFind() {
			worker.terminate();
		}
		</script>
	</body>
</html>